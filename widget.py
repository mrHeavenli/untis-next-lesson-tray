import timeimport threadingfrom datetime import datetime, timedeltafrom pystray import Icon, MenuItem, Menufrom PIL import Imagefrom untis import get_next_lesson_for_userimport jsonfrom sys import argvimport webuntisimport atexitimport oscfg = {}with open(argv[1]) as config_file:    cfg = json.load(config_file)session = webuntis.Session(            **cfg['auth'],            useragent="UntisWidget/1.0",)atexit.register(lambda: session.logout())def update_icon(icon):    while True:        now = datetime.now()                  lesson = get_next_lesson_for_user(session, cfg['settings']['template'])        icon.title = lesson        time.sleep(cfg['settings']['interval']) dirname = os.path.dirname(__file__) icon = Icon(    "UntisWidget",    Image.open(os.path.join(dirname, 'icon.ico')),    menu=Menu(MenuItem("Quit", lambda _: icon.stop())))threading.Thread(target=update_icon, args=(icon,), daemon=True).start()icon.run()